<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Files — MiniDrive</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style type="text/tailwindcss">
      :root {
        --primary-color: #2196f3;
      }
      body {
        font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <div class="flex h-screen w-full">
      <!-- Sidebar -->
      <aside class="flex w-64 flex-col border-r border-gray-200 bg-white">
        <div class="flex h-16 items-center gap-3 px-6">
          <h2 class="text-xl font-bold text-gray-900">MiniDrive</h2>
        </div>
        <nav class="flex-1 space-y-2 p-4">
          <a
            href="/dashboard"
            class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-gray-100 text-gray-700"
          >
            <span class="material-symbols-outlined">home</span>
            <p class="text-sm font-medium">Home</p>
          </a>
          <a
            href="/folders"
            class="flex items-center gap-3 px-3 py-2 rounded-full hover:bg-gray-100 text-gray-700"
          >
            <span class="material-symbols-outlined">folder</span>
            <p class="text-sm font-medium">Folders</p>
          </a>
          <a
            href="/logout"
            class="flex items-center gap-3 rounded-lg px-4 py-2 text-gray-600 hover:bg-gray-100 hover:text-gray-900"
          >
            <span class="material-symbols-outlined">logout</span>
            <span class="font-medium">Logout</span>
          </a>
        </nav>
      </aside>

      <!-- Main content -->
      <div class="flex flex-1 flex-col">
        <!-- Header -->
        <header
          class="flex h-16 items-center justify-between border-b border-gray-200 bg-white px-6"
        >
          <h1 class="text-lg font-bold text-gray-900">All Files</h1>
          <% if (user) { %>
          <span class="flex items-center gap-2 text-gray-700 text-sm">
            Hi, <%= user.name %>
            <img
              alt="<%= user?.name || 'User' %>"
              class="w-10 h-10 rounded-full"
              src="https://ui-avatars.com/api/?name=<%= encodeURIComponent(user?.name || 'U') %>"
            />
          </span>

          <% } %>
        </header>

        <!-- File list -->
        <main class="flex-1 overflow-y-auto p-8">
          <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
            <% if (files.length === 0) { %>
            <p class="text-gray-500">No files uploaded yet.</p>
            <% } %> <% files.forEach(file => { %>
            <a
              href="/files/<%= file.id %>"
              class="block rounded-xl border border-gray-200 bg-white p-4 shadow-sm hover:shadow-md transition"
            >
              <div class="flex items-center gap-3">
                <span
                  class="material-symbols-outlined text-[var(--primary-color)]"
                  >description</span
                >
                <div>
                  <h2 class="font-semibold text-gray-900 truncate">
                    <%= file.name %>
                  </h2>
                  <p class="text-sm text-gray-500">
                    <%= (file.size / 1024).toFixed(2) %> KB · <%=
                    file.uploadedAt.toLocaleDateString() %>
                  </p>
                </div>
              </div>
            </a>
            <% }) %>
          </div>
        </main>
      </div>
    </div>
  </body>
</html>
