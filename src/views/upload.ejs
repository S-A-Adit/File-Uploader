<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect" />
    <link
      as="style"
      href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Plus+Jakarta+Sans:wght@400;500;700;800"
      onload="this.rel='stylesheet'"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <title>Upload â€” MiniDrive</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style type="text/tailwindcss">
      :root {
        --primary-color: #ea2a33;
      }
      body {
        font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div
      class="relative flex size-full min-h-screen flex-col overflow-x-hidden"
    >
      <div class="layout-container flex h-full grow flex-col">
        <!-- Header -->
        <header
          class="flex items-center justify-between border-b border-gray-200 px-10 py-3"
        >
          <div class="flex items-center gap-4 text-gray-800">
            <a
              href="/dashboard"
              class="flex items-center gap-3 px-4 py-2 rounded-full text-gray-700 font-bold text-lg hover:bg-[var(--primary-color)] hover:text-white transition-colors duration-200 ease-in-out"
            >
              <h2>MiniDrive</h2>
            </a>
          </div>

          <div class="flex items-center gap-4">
            <% if (user) { %>
            <span class="text-gray-700 text-sm">Hi, <%= user.name %></span>
            <% } %>
            <a
              href="/logout"
              class="rounded-full bg-gray-100 h-10 w-10 flex items-center justify-center hover:bg-gray-200"
            >
              <span class="material-symbols-outlined">logout</span>
            </a>
          </div>
        </header>

        <!-- Upload Section -->
        <main class="flex-1 flex items-center justify-center p-8">
          <div class="w-full max-w-2xl bg-white rounded-2xl shadow-sm p-8">
            <div class="flex flex-col items-center">
              <h2 class="text-2xl font-bold mb-2">Upload Files</h2>
              <p class="text-gray-500 text-sm mb-6">
                Select a destination and drop your files below
              </p>
            </div>

            <!-- Destination folder -->
            <form action="/upload" method="POST" enctype="multipart/form-data">
              <div class="mb-6">
                <label
                  for="destination"
                  class="block text-sm font-medium text-gray-700 mb-2"
                  >Destination Folder</label
                >
                <select
                  name="destination"
                  id="destination"
                  class="form-select w-full rounded-xl border-gray-300 bg-gray-50 h-12 px-4 text-base focus:ring-[var(--primary-color)] focus:border-[var(--primary-color)]"
                >
                  <!-- Root option -->
                  <option value="">Root (My Drive)</option>

                  <!-- User-created folders -->
                  <% if (folders && folders.length) { %> <%
                  folders.forEach(folder => { %>
                  <option value="<%= folder.id %>"><%= folder.name %></option>
                  <% }) %> <% } else { %>
                  <option disabled>No folders available</option>
                  <% } %>
                </select>
              </div>
              <!-- Drag & Drop zone -->
              <div
                class="flex flex-col items-center justify-center gap-4 rounded-xl border-2 border-dashed border-gray-300 p-12 text-center bg-gray-50/50"
              >
                <form
                  action="/upload"
                  method="POST"
                  enctype="multipart/form-data"
                  class="flex flex-col items-center gap-3 border-2 border-dashed border-gray-400 p-6 rounded-lg"
                >
                  <p class="text-lg font-bold">Drag and drop files here</p>
                  <p class="text-gray-500 text-sm">or</p>

                  <!-- Hidden file input -->
                  <input
                    type="file"
                    name="file"
                    id="fileInput"
                    class="hidden"
                  />

                  <!-- Styled label that opens file picker -->
                  <label
                    for="fileInput"
                    class="cursor-pointer flex items-center justify-center size-16 bg-gray-200 rounded-full hover:bg-gray-300"
                  >
                    <span
                      class="material-symbols-outlined text-3xl text-gray-600"
                      >upload</span
                    >
                  </label>

                  <!-- Upload button styled same as circle -->
                  <button
                    type="submit"
                    class="mt-3 rounded-full h-12 px-6 bg-red-600 text-white text-sm font-bold hover:bg-red-700"
                  >
                    Upload
                  </button>
                </form>
              </div>
            </form>
          </div>
        </main>
      </div>
    </div>
  </body>
</html>
